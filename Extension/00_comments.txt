This is an extension to the previous cluster algorithm and adds an approximated diffusive flux the flow matrix and enables the scaling for one Re-Number to another. The files are created for a base Re-Number of 1.
Short explanation
1. Run the script SCRIPT_LOAD_DATA to create the files "DATA_PREPARED_Re_1" and "DATA_RAW_Re_1"

2. Run the script SCRIPT_diffusive_fluxes to create the file "GEOMETRIC_FLUX". For every internal face, the area is divided by the distance vector of the two neighbored cells. With the multiplication of the diffusivty (in a later step), an approximated diffusive flux over every cell is calculated.

3. Adjust the parameters "x_min" and "x_max" within "FUNC_CLUSTERING" to the correct values of the domain for the correct slicing.

4. Run the MATLAB script "SCRIPT_AUTOMATION_CLUSTERING_MOMENTS". Within the script, specify n_SLICES and n_LOCAL as single values for the clustering process (in this example 42 and 15, respectively), the density rho for the exchange streams since the UDF exports mass flow rates (1000 kg/m^3), the diffusion coefficient for the diffusive (10^-9 m^2/s) flux as well as the Reynoldsnumber as a single value/vector for the scaling (1,2,5,10,20,50,100,200). The scripts clusters the combination of n_SLICES and n_LOCAL, determines the flow matrix and applies the fluid dynamic characterization with the mean age theory for every compartment model

    "FUNC_CLUSTERING" cuts the domain into n_SLICES, extract the relevant data for every slice and clusters the cells within every slice with the sub-function "FUNC_CLUSTERING_FIXED_DELTA_SLICES". A text file is generated with the results of the clustering process as an interpolation file for FLUENT with "exporttofluent" to visualize the different compartments. The compartment number is an additional UDS- The file "CLUSTERED_DATA_RE_1_SLICES_42_DELTA_15" is created
    "FUNC_VOLUME_FLOW_COMV_DIFF" determines the exchange streams and the flow matrix for the generated compartment model. During the summation of the convective streams over the relevant faces, the geometric fluxes within the file "GEOMETRIC_FLUX" are summed up as well. It is assumed that the diffusion coefficient is constant so it can be considered in a later step and just multiplied with the sum of the geometric flux. The file "CLUSTERED_DATA_RE_1_VOLUME_FLOW_SLICES_42_DELTA_15" is created
    "FUNC_MOMENTS_LINEAR_SYSTEM" applies the steady state mean age theory to the generated compartment model and performs a fluid dynamic characterization. In addition to the previous version of the cluster algorithm, the base Reynoldsnumber must be specified within the function and as an additional input parameters the diffusion coefficient for the diffusive flux as well as the Reynoldsnumber for the desired operating point and the scaling is desired. The file "RESULT_RE_BASE_1_D_10-9_RE_XX_MOMENTS" is created, where XX is the Re-Number scaled to. A text file is generated with the results as an interpolation file for FLUENT with "exporttofluent" to visualize the results within FLUENT "INTERPOLATION_INTERPOLATION_RE_BASE_1_D_10-9_RE_XX_MOMENTS".

